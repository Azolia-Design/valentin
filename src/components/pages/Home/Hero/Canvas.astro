---
---
<script is:inline type="text/partytown">
    import { Sketch, Uniform, Rect } from "./Sketch";
    Uniform.prototype.set = function( ...values ) {
        if (this.currentValue && this.areValuesEqual(values, this.currentValue)) {
            return; // If the new values are the same as the current ones, do nothing
        }
        this.currentValue = values; // Update the current value
        let method = 'uniform' + this.suffix;
        let args = [ this.location ].concat( values );
        this.gl[ method ].apply( this.gl, args );
    };

    Uniform.prototype.areValuesEqual = function(newValues, oldValues) {
        if (!oldValues) return false;
        if (newValues.length !== oldValues.length) return false;

        for (let i = 0; i < newValues.length; i++) {
            if (newValues[i] !== oldValues[i]) {
                return false;
            }
        }

        return true;
    };
    Rect.verts = new Float32Array([
            -1, -1,
            1, -1,
            -1, 1,
            1, 1,
        ]);

    Rect.prototype.render = function( gl ) {
        gl.drawArrays( gl.TRIANGLE_STRIP, 0, 4 );
    };

    new Sketch(document.getElementById('hero-bg'));
</script>
<canvas
    id="hero-bg"
    class="home__hero-bg-main-inner"
    data-imageOriginal={Astro.props.original}
    data-imageDepth={Astro.props.depth}
    data-verticalThreshold={Astro.props.verticalThreshold}
    data-horizontalThreshold={Astro.props.horizontalThreshold}
/>