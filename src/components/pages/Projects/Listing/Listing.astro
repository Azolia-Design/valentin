---
import { getImage } from 'astro:assets';
import Image from '~/components/common/Image.astro';
import ProjectListing from './ProjectListing';
import ArrowNext from '~/icons/arrow-next-orange.svg';
import ArrowPrev from '~/icons/arrow-prev-orange.svg';

const arrows = {
    next: await getImage({ src: ArrowNext, format: "svg" }),
    prev: await getImage({ src: ArrowPrev, format: "svg" })
};

const projects = [
    {
        link: "#",
        year: 2018,
        title: "Vietcom<br/>bank",
        roles: ["Design system", "Mobile app design", "Graphic Design"],
        services: ["Website Design",  "Graphic Design"],
        selling_points: ["Up 200% Conversion Rate", "3.233.222 Downloaded"],
        desc: "Vietcombank is one of the fastest growing global bank. Part of it is due to it's strong design thinking process.",
        thumbnail: {
            src: "/images/project-thumb-1.jpg",
            alt: 'mockup iphone'
        },

    },
    {
        link: "#",
        year: 2020,
        title: "BIDV",
        roles: ["Brand Identity", "UX Research", "Web Design"],
        services: ["Branding", "User Experience Research"],
        selling_points: ["Brand Recognition Boost by 120%", "Awarded Best Banking Website 2020"],
        desc: "BIDV's rebranding and UX improvements have significantly enhanced customer satisfaction and brand loyalty.",
        thumbnail: {
            src: "/images/project-thumb-2.jpg",
            alt: 'mockup iphone'
        }
    },
    {
        link: "#",
        year: 2021,
        title: "Techcom<br/>bank",
        roles: ["UX/UI Design", "Web Development", "Graphic Design"],
        services: ["Mobile App Design", "Web Development"],
        selling_points: ["Increase User Engagement by 150%", "5,000,000+ Active Users"],
        desc: "Techcombank has established itself as a leading bank through innovative technology and user-centered design.",
        thumbnail: {
            src: "/images/project-thumb-3.jpg",
            alt: 'mockup iphone'
        }
    }
]
---
<section class="sc-projects__listing">
    <div class="projects__listing">
        <ProjectListing data={projects} arrows={arrows} client:visible={{ rootMargin: "100% 0% 100% 0%" }}/>
    </div>
</section>

<style lang="scss" is:global>
    .sc-projects__listing {
    }
    .projects__listing {
        &-main {
            padding-top: 17.14vh;
            padding-bottom: 8.76vh;
            height: 100%;
        }
    }
    .projects__sticky {
        position: relative;
        height: 100vh;
        > .container {
            z-index: 3;
            height: 100%;
            pointer-events: none;
        }
    }
    .projects__navigation {
        z-index: 2;
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        &-area {
            width: 100%;
            height: 50%;
        }
    }
    .project {
        &-item-label {
            margin-bottom: 1rem;
            pointer-events: auto;
        }
        &__name {
            grid-column: 1/5;
            overflow-wrap: break-word;
            margin-top: -.12em;
            align-self: start;
            line-height: .835em;
            &-txt {
                justify-self: start;
                align-self: start;
                &.active {
                    pointer-events: auto;
                }
            }
        }
        &__desc {
            grid-column: 1/4;
            align-self: end;
            max-width: 32rem;
            &-txt {
                justify-self: start;
                align-self: end;
                &.active {
                    pointer-events: auto;
                }
            }
        }
        &__info {
            grid-column: 6/9;
            grid-row: 1/2;
            align-self: start;
            justify-self: start;

            display: flex;
            flex-direction: column;
            align-items: start;
            gap: 7.4rem 0;
        }
        &__role,
        &__services,
        &__selling {
            display: flex;
            flex-direction: column;
            align-items: start;
            &-listing {
                display: flex;
                flex-direction: column;
                align-items: start;
                align-self: start;
                justify-self: start;
                &.active {
                    p {
                        pointer-events: auto;
                    }
                }
            }
        }
        &__year {
            grid-column: 6/8;
            align-self: end;
            pointer-events: auto;
            display: flex;
            gap: 0 .5rem;
            line-height: .9em;
        }
        &__thumbnail {
            height: 100%;
            &-wrap {
                grid-column: 9/15;
                grid-row: 1/3;
                position: relative;
                overflow: hidden;
            }
            &-listing {
                height: 100%;
                display: grid;
            }
            &-img {
                --clipping: 100%;

                position: relative;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                clip-path: polygon(0% 0%, var(--clipping) 0, var(--clipping) var(--clipping), 0 var(--clipping));
                pointer-events: auto;
                img {
                    transform: translate(calc((100% - var(--clipping)) / -2), calc((100% - var(--clipping)) / -2));
                    position: absolute;
                }
            }
        }
    }
</style>