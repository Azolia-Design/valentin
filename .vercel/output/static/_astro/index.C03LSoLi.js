function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,n){return e&&Y(t.prototype,e),n&&Y(t,n),t}function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e){return bt(t)||St(t,e)||Z(t,e)||Et()}function p(t){return mt(t)||wt(t)||Z(t)||Ct()}function mt(t){if(Array.isArray(t))return I(t)}function bt(t){if(Array.isArray(t))return t}function wt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function St(t,e){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&null!=c.return&&c.return()}finally{if(o)throw i}}return n}}function Z(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ct(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Et(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(t,e){return Object.getOwnPropertyNames(Object(t)).reduce((function(n,r){var o=Object.getOwnPropertyDescriptor(Object(t),r),i=Object.getOwnPropertyDescriptor(Object(e),r);return Object.defineProperty(n,r,i||o)}),{})}function _(t){return"string"==typeof t}function B(t){return Array.isArray(t)}function L(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=A(e);return void 0!==n.types?t=n.types:void 0!==n.split&&(t=n.split),void 0!==t&&(n.types=(_(t)||B(t)?String(t):"").split(",").map((function(t){return String(t).trim()})).filter((function(t){return/((line)|(word)|(char))/i.test(t)}))),(n.absolute||n.position)&&(n.absolute=n.absolute||/absolute/.test(e.position)),n}function V(t){var e=_(t)||B(t)?String(t):"";return{none:!e,lines:/line/i.test(e),words:/word/i.test(e),chars:/char/i.test(e)}}function $(t){return null!==t&&"object"==typeof t}function Ot(t){return $(t)&&/^(1|3|11)$/.test(t.nodeType)}function At(t){return"number"==typeof t&&t>-1&&t%1==0}function jt(t){return $(t)&&At(t.length)}function T(t){return B(t)?t:null==t?[]:jt(t)?Array.prototype.slice.call(t):[t]}function J(t){var e=t;return _(t)&&(e=/^(#[a-z]\w+)$/.test(t.trim())?document.getElementById(t.trim().slice(1)):document.querySelectorAll(t)),T(e).reduce((function(t,e){return[].concat(p(t),p(T(e).filter(Ot)))}),[])}!function(){function t(){for(var t=arguments.length,e=0;e<t;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];1===n.nodeType||11===n.nodeType?this.appendChild(n):this.appendChild(document.createTextNode(String(n)))}}function e(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function n(){for(var t=this.parentNode,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.length;if(t)for(o||t.removeChild(this);o--;){var i=n[o];"object"!=typeof i?i=this.ownerDocument.createTextNode(i):i.parentNode&&i.parentNode.removeChild(i),o?t.insertBefore(this.previousSibling,i):t.replaceChild(i,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=t,DocumentFragment.prototype.append=t),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=e,DocumentFragment.prototype.replaceChildren=e),Element.prototype.replaceWith||(Element.prototype.replaceWith=n,DocumentFragment.prototype.replaceWith=n))}();var Tt=Object.entries,R="_splittype",g={},xt=0;function w(t,e,n){if(!$(t))return console.warn("[data.set] owner is not an object"),null;var r=t[R]||(t[R]=++xt),o=g[r]||(g[r]={});return void 0===n?e&&Object.getPrototypeOf(e)===Object.prototype&&(g[r]=G(G({},o),e)):void 0!==e&&(o[e]=n),n}function j(t,e){var n=$(t)?t[R]:null;return n&&g[n]||{}}function Q(t){var e=t&&t[R];e&&(delete t[e],delete g[e])}function Wt(){Object.keys(g).forEach((function(t){delete g[t]}))}function _t(){Tt(g).forEach((function(t){var e=K(t,2),n=e[0],r=e[1],o=r.isRoot,i=r.isSplit;(!o||!i)&&(g[n]=null,delete g[n])}))}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return(t?String(t):"").trim().replace(/\s+/g," ").split(e)}var U="\\ud800-\\udfff",tt="\\u0300-\\u036f\\ufe20-\\ufe23",et="\\u20d0-\\u20f0",rt="\\ufe0e\\ufe0f",Nt="[".concat(U,"]"),F="[".concat(tt).concat(et,"]"),H="\\ud83c[\\udffb-\\udfff]",Dt="(?:".concat(F,"|").concat(H,")"),nt="[^".concat(U,"]"),it="(?:\\ud83c[\\udde6-\\uddff]){2}",at="[\\ud800-\\udbff][\\udc00-\\udfff]",ot="\\u200d",st="".concat(Dt,"?"),ct="[".concat(rt,"]?"),Lt="(?:"+ot+"(?:"+[nt,it,at].join("|")+")"+ct+st+")*",Rt=ct+st+Lt,$t="(?:".concat(["".concat(nt).concat(F,"?"),F,it,at,Nt].join("|"),"\n)"),kt=RegExp("".concat(H,"(?=").concat(H,")|").concat($t).concat(Rt),"g"),It=[ot,U,tt,et,rt],Ft=RegExp("[".concat(It.join(""),"]"));function Ht(t){return t.split("")}function lt(t){return Ft.test(t)}function Mt(t){return t.match(kt)||[]}function Bt(t){return lt(t)?Mt(t):Ht(t)}function Vt(t){return null==t?"":String(t)}function Ut(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t=Vt(t))&&_(t)&&!e&&lt(t)?Bt(t):t.split(e)}function M(t,e){var n=document.createElement(t);return e&&Object.keys(e).forEach((function(t){var r=e[t],o=_(r)?r.trim():r;null===o||""===o||("children"===t?n.append.apply(n,p(T(o))):n.setAttribute(t,o))})),n}var z={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function zt(t,e){var n,r=V((e=A(z,e)).types),o=e.tagName,i=t.nodeValue,a=document.createDocumentFragment(),c=[];return/^\s/.test(i)&&a.append(" "),n=Pt(i).reduce((function(t,n,i,s){var l,u;return r.chars&&(u=Ut(n).map((function(t){var n=M(o,{class:"".concat(e.splitClass," ").concat(e.charClass),style:"display: inline-block;",children:t});return w(n,"isChar",!0),c=[].concat(p(c),[n]),n}))),r.words||r.lines?(w(l=M(o,{class:"".concat(e.wordClass," ").concat(e.splitClass),style:"display: inline-block; ".concat(r.words&&e.absolute?"position: relative;":""),children:r.chars?u:n}),{isWord:!0,isWordStart:!0,isWordEnd:!0}),a.appendChild(l)):u.forEach((function(t){a.appendChild(t)})),i<s.length-1&&a.append(" "),r.words?t.concat(l):t}),[]),/\s$/.test(i)&&a.append(" "),t.replaceWith(a),{words:n,chars:c}}function ut(t,e){var n=t.nodeType,r={words:[],chars:[]};if(!/(1|3|11)/.test(n))return r;if(3===n&&/\S/.test(t.nodeValue))return zt(t,e);var o=T(t.childNodes);if(o.length&&(w(t,"isSplit",!0),!j(t).isRoot)){t.style.display="inline-block",t.style.position="relative";var i=t.nextSibling,a=t.previousSibling,c=t.textContent||"",s=i?i.textContent:" ",l=a?a.textContent:" ";w(t,{isWordEnd:/\s$/.test(c)||/^\s/.test(s),isWordStart:/^\s/.test(c)||/\s$/.test(l)})}return o.reduce((function(t,n){var r=ut(n,e),o=r.words,i=r.chars;return{words:[].concat(p(t.words),p(o)),chars:[].concat(p(t.chars),p(i))}}),r)}function Yt(t,e,n,r){if(!n.absolute)return{top:e?t.offsetTop:null};var o=t.offsetParent,i=K(r,2),a=i[0],c=i[1],s=0,l=0;if(o&&o!==document.body){var u=o.getBoundingClientRect();s=u.x+a,l=u.y+c}var p=t.getBoundingClientRect(),f=p.width,h=p.height,d=p.x;return{width:f,height:h,top:p.y+c-l,left:d+a-s}}function ft(t){j(t).isWord?(Q(t),t.replaceWith.apply(t,p(t.childNodes))):T(t.children).forEach((function(t){return ft(t)}))}var Xt=function(){return document.createDocumentFragment()};function qt(t,e,n){var r,o,i,a=V(e.types),c=e.tagName,s=t.getElementsByTagName("*"),l=[],u=[],p=null,f=[],h=t.parentElement,d=t.nextElementSibling,y=Xt(),g=window.getComputedStyle(t),v=g.textAlign,m=.2*parseFloat(g.fontSize);return e.absolute&&(i={left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth},o=t.offsetWidth,r=t.offsetHeight,w(t,{cssWidth:t.style.width,cssHeight:t.style.height})),T(s).forEach((function(r){var o=r.parentElement===t,i=Yt(r,o,e,n),c=i.width,s=i.height,f=i.top,h=i.left;/^br$/i.test(r.nodeName)||(a.lines&&o&&((null===p||f-p>=m)&&(p=f,l.push(u=[])),u.push(r)),e.absolute&&w(r,{top:f,left:h,width:c,height:s}))})),h&&h.removeChild(t),a.lines&&(f=l.map((function(t){var n=M(c,{class:"".concat(e.splitClass," ").concat(e.lineClass),style:"display: block; text-align: ".concat(v,"; width: 100%;")});w(n,"isLine",!0);var r={height:0,top:1e4};return y.appendChild(n),t.forEach((function(t,e,o){var i=j(t),a=i.isWordEnd,c=i.top,s=i.height,l=o[e+1];r.height=Math.max(r.height,s),r.top=Math.min(r.top,c),n.appendChild(t),a&&j(l).isWordStart&&n.append(" ")})),e.absolute&&w(n,{height:r.height,top:r.top}),n})),a.words||ft(y),t.replaceChildren(y)),e.absolute&&(t.style.width="".concat(t.style.width||o,"px"),t.style.height="".concat(r,"px"),T(s).forEach((function(t){var e=j(t),n=e.isLine,r=e.top,o=e.left,a=e.width,c=e.height,s=j(t.parentElement),l=!n&&s.isLine;t.style.top="".concat(l?r-s.top:r,"px"),t.style.left="".concat(n?i.left:o-(l?i.left:0),"px"),t.style.height="".concat(c,"px"),t.style.width="".concat(n?i.width:a,"px"),t.style.position="absolute"}))),h&&(d?h.insertBefore(t,d):h.appendChild(t)),f}var x=A(z,{}),Gt=function(){function t(e,n){yt(this,t),this.isSplit=!1,this.settings=A(x,L(n)),this.elements=J(e),this.split()}return X(t,null,[{key:"clearData",value:function(){Wt()}},{key:"setDefaults",value:function(t){return x=A(x,L(t)),z}},{key:"revert",value:function(t){J(t).forEach((function(t){var e=j(t),n=e.isSplit,r=e.html,o=e.cssWidth,i=e.cssHeight;n&&(t.innerHTML=r,t.style.width=o||"",t.style.height=i||"",Q(t))}))}},{key:"create",value:function(e,n){return new t(e,n)}},{key:"data",get:function(){return g}},{key:"defaults",get:function(){return x},set:function(t){x=A(x,L(t))}}]),X(t,[{key:"split",value:function(t){var e=this;this.revert(),this.elements.forEach((function(t){w(t,"html",t.innerHTML)})),this.lines=[],this.words=[],this.chars=[];var n=[window.pageXOffset,window.pageYOffset];void 0!==t&&(this.settings=A(this.settings,L(t)));var r=V(this.settings.types);r.none||(this.elements.forEach((function(t){w(t,"isRoot",!0);var n=ut(t,e.settings),r=n.words,o=n.chars;e.words=[].concat(p(e.words),p(r)),e.chars=[].concat(p(e.chars),p(o))})),this.elements.forEach((function(t){if(r.lines||e.settings.absolute){var o=qt(t,e.settings,n);e.lines=[].concat(p(e.lines),p(o))}})),this.isSplit=!0,window.scrollTo(n[0],n[1]),_t())}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),t.revert(this.elements)}}]),t}();export{Gt as S};